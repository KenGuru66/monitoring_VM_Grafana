# üìä –î–∞—à–±–æ—Ä–¥ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

–°–æ–∑–¥–∞–Ω **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç** –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–∞ Grafana –Ω–∞ –æ—Å–Ω–æ–≤–µ **–†–ï–ê–õ–¨–ù–´–•** –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –º–µ—Ç—Ä–∏–∫ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏–∑ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

```
‚úÖ CSV —Ñ–∞–π–ª: 6197.20 MB (63,270,303 —Å—Ç—Ä–æ–∫)
‚úÖ –ù–∞–π–¥–µ–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤: 14
‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫: 241
‚úÖ –ö–æ–º–±–∏–Ω–∞—Ü–∏–π Resource-Metric: 775
‚úÖ –ü–∞–Ω–µ–ª–µ–π –≤ –¥–∞—à–±–æ—Ä–¥–µ: 775
```

## üìã –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

| ‚Ññ | –†–µ—Å—É—Ä—Å | –ú–µ—Ç—Ä–∏–∫ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|--------|--------|----------|
| 1 | Controller | 103 | –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä |
| 2 | Controller NFSV3 | 52 | NFS v3 –ø—Ä–æ—Ç–æ–∫–æ–ª |
| 3 | Controller NFSV4 | 52 | NFS v4 –ø—Ä–æ—Ç–æ–∫–æ–ª |
| 4 | Controller NFSV4.1 | 52 | NFS v4.1 –ø—Ä–æ—Ç–æ–∫–æ–ª |
| 5 | Controller SMB2/3 | 52 | SMB –ø—Ä–æ—Ç–æ–∫–æ–ª |
| 6 | Disk | 36 | –§–∏–∑–∏—á–µ—Å–∫–∏–µ –¥–∏—Å–∫–∏ |
| 7 | Disk Domain | 45 | –î–∏—Å–∫–æ–≤—ã–π –¥–æ–º–µ–Ω |
| 8 | ETH_EXP_Port | 4 | Ethernet expansion –ø–æ—Ä—Ç |
| 9 | Ethernet Port | 69 | Ethernet –ø–æ—Ä—Ç—ã |
| 10 | Host | 55 | –•–æ—Å—Ç—ã |
| 11 | LUN | 101 | –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –¥–∏—Å–∫–∏ |
| 12 | LUN Priority | 12 | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã LUN |
| 13 | Logical Port | 58 | –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä—Ç—ã |
| 14 | Storage Pool | 84 | –ü—É–ª—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è |

## üìù –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `resource_metric_mapping_real.py`
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
- `RESOURCE_MAPPING` - ID —Ä–µ—Å—É—Ä—Å–æ–≤ ‚Üí –Ω–∞–∑–≤–∞–Ω–∏—è
- `METRIC_MAPPING` - ID –º–µ—Ç—Ä–∏–∫ ‚Üí –Ω–∞–∑–≤–∞–Ω–∏—è  
- `RESOURCE_TO_METRICS` - –†–µ—Å—É—Ä—Å ‚Üí —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–º–µ–Ω–∏–º—ã—Ö –º–µ—Ç—Ä–∏–∫
- `DEFAULT_RESOURCES` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

### 2. `grafana/provisioning/dashboards/Huawei-OceanStor-Real-Data.json`
–î–∞—à–±–æ—Ä–¥ Grafana —Å 775 –ø–∞–Ω–µ–ª—è–º–∏:
- –ö–∞–∂–¥—ã–π —Ä–µ—Å—É—Ä—Å - –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è
- –¢–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏
- –ù–µ—Ç –ø—É—Å—Ç—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤!

### 3. `Data2csv/output/2102353TJWFSP3100020.csv`
CSV —Ñ–∞–π–ª —Å–æ –í–°–ï–ú–ò –º–µ—Ç—Ä–∏–∫–∞–º–∏ (6.2 GB):
- 63,270,303 —Å—Ç—Ä–æ–∫
- –í—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ Resource-Metric

### 4. `build_dashboard_from_real_data.py`
–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–∞:
- –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞ —Å–æ –≤—Å–µ–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞—à–±–æ—Ä–¥–∞

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –í–°–ï –¥–∞–Ω–Ω—ã–µ

```bash
# –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π CSV (6.2 GB)
python3 csv2vm_parallel.py Data2csv/output/2102353TJWFSP3100020.csv

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Grafana
docker compose restart grafana
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: –≠—Ç–æ –∑–∞–π–º–µ—Ç ~5-10 –º–∏–Ω—É—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ RAM!

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

```bash
# 1. –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ CSV
rm -f Data2csv/output/*.csv

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏
python3 Data2csv/Huawei_perf_parser_v0.2_parallel.py \
  -i "Data2csv/logs/Storage_History_Performance_Files (1).zip" \
  -o Data2csv/output \
  -r "Controller" \
  -r "LUN" \
  -r "Storage Pool" \
  -m "68" \
  -m "1299" \
  -m "22" \
  -m "18"

# 3. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ VictoriaMetrics
python3 csv2vm_parallel.py Data2csv/output/*.csv

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Grafana
docker compose restart grafana
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –¥–∞—à–±–æ—Ä–¥ —Å –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∑–∞–Ω–æ–≤–æ
python3 build_dashboard_from_real_data.py

# –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π CSV
python3 csv2vm_parallel.py Data2csv/output/*.csv

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Grafana
docker compose restart grafana
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞

### ‚úÖ –ü–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —Ä—É—á–Ω—ã–º –º–∞–ø–ø–∏–Ω–≥–æ–º

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –†—É—á–Ω–æ–π –º–∞–ø–ø–∏–Ω–≥ | –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
|----------|----------------|-----------------|
| –¢–æ—á–Ω–æ—Å—Ç—å | –ú–æ–≥–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ | 100% —Ä–µ–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ |
| –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å | –¢—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ |
| –ü—É—Å—Ç—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ | –í–æ–∑–º–æ–∂–Ω—ã | –ò—Å–∫–ª—é—á–µ–Ω—ã |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–Ω–µ–ª–µ–π | 173 | 775 (–≤ 4.5 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ!) |
| –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è | –ù–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ | 5-10 –º–∏–Ω—É—Ç |

### ‚úÖ –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ**: 14 —Ç–∏–ø–æ–≤ —Ä–µ—Å—É—Ä—Å–æ–≤ (–≤–º–µ—Å—Ç–æ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã—Ö 6)

–ù–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±—ã–ª–∏ –≤ —Ä—É—á–Ω–æ–º –º–∞–ø–ø–∏–Ω–≥–µ:
- Controller NFSV3, NFSV4, NFSV4.1, SMB2/3 (—Ñ–∞–π–ª–æ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã)
- Disk (—Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –¥–∏—Å–∫–∏)
- ETH_EXP_Port, Logical Port (—Å–µ—Ç–µ–≤—ã–µ –ø–æ—Ä—Ç—ã)
- LUN Priority (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã)

### ‚úÖ –ù–∞–π–¥–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ**: 241 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ (–≤–º–µ—Å—Ç–æ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã—Ö 56)

–ù–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ—Ç—Ä–∏–∫:
- Cache utilization (page, chunk, preservation)
- VAAI commands (VMware integration)
- DR (Disaster Recovery) metrics
- Full Copy, ODX operations
- Link transmission latency
- Deduplication & compression ratios
- NFS/CIFS session counts

## üìä –ü—Ä–∏–º–µ—Ä—ã –º–µ—Ç—Ä–∏–∫

### Controller (103 –º–µ—Ç—Ä–∏–∫–∏)

**CPU & Performance:**
- Avg. CPU Usage (%)
- KV CPU Usage (%)
- Avg. I/O Response Time (us)
- Service Time (us)

**Cache:**
- Cache page utilization (%)
- Cache chunk utilization (%)
- Cache read/write usage (%)
- Read Cache Hit Ratio (%)

**Network:**
- CIFS operation count per second
- CIFS Tree/Session Quantity
- NFS Connection Quantity

**Commands:**
- Full Copy Read/Write Request (Bandwidth, IOPS, Size, Response Time)
- ODX Read/Write Request
- Unmap/WRITE SAME Command

### LUN (101 –º–µ—Ç—Ä–∏–∫–∞)

**IOPS & Bandwidth:**
- SCSI IOPS, ISCSI IOPS
- Total/Read/Write IOPS
- Read/Write Bandwidth

**Advanced:**
- Data Reduction/Deduplication/Compression Ratio
- Thin LUN Space Saving Rate
- VAAI Bandwidth/IOPS
- DR Read/Write Request
- I/O Sequentiality

### Storage Pool (84 –º–µ—Ç—Ä–∏–∫–∏)

**Capacity:**
- Usage (%)
- Total/Used/Free capacity
- Allocated capacity

**Performance:**
- IOPS, Bandwidth
- Response Time
- I/O Granularity Distribution

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É
head -100 resource_metric_mapping_real.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ Controller
grep -A30 '"Controller":' resource_metric_mapping_real.py

# –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞
grep -E '^\s+"[^"]+": \[  #' resource_metric_mapping_real.py
```

## üõ†Ô∏è –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# 1. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –º–∞–ø–ø–∏–Ω–≥
python3 build_dashboard_from_real_data.py

# 2. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
python3 csv2vm_parallel.py Data2csv/output/*.csv

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Grafana
docker compose restart grafana
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫

–ï—Å–ª–∏ Huawei –¥–æ–±–∞–≤–∏—Ç –Ω–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `build_dashboard_from_real_data.py`
2. –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç –Ω–æ–≤—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
3. –î–∞—à–±–æ—Ä–¥ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ CSV —Ñ–∞–π–ª–∞

```
Resource,Metric,Element,Value,ISO-8601,Unix-timestamp
Controller,KV CPU Usage (%),0A,85.2,2025-09-22T00:00:00,1726963200
```

### –§–æ—Ä–º–∞—Ç –º–µ—Ç—Ä–∏–∫ –≤ Prometheus

```
huawei_kv_cpu_usage_percent{array="2102353...", Resource="Controller", Element="0A"} 85.2
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Grafana

- `$array` - –í—ã–±–æ—Ä –º–∞—Å—Å–∏–≤–∞ (SN)
- `$Element` - –í—ã–±–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞ (0A, 0B, disk01, lun_001 –∏ —Ç.–¥.)

## üéâ –ò—Ç–æ–≥

–í–º–µ—Å—Ç–æ **—É–≥–∞–¥—ã–≤–∞–Ω–∏—è** –∫–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–º–µ–Ω–∏–º—ã –∫ –∫–∞–∫–∏–º —Ä–µ—Å—É—Ä—Å–∞–º, –º—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ–º **—Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:

- ‚úÖ 775 –ø–∞–Ω–µ–ª–µ–π (–≤–º–µ—Å—Ç–æ 173)
- ‚úÖ 14 —Ç–∏–ø–æ–≤ —Ä–µ—Å—É—Ä—Å–æ–≤ (–≤–º–µ—Å—Ç–æ 6)
- ‚úÖ 241 –º–µ—Ç—Ä–∏–∫–∞ (–≤–º–µ—Å—Ç–æ 56)
- ‚úÖ 100% —Ç–æ—á–Ω–æ—Å—Ç—å (–Ω–µ—Ç –ø—É—Å—Ç—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

**–í—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–∞–Ω–Ω—ã–µ!**

