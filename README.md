# OceanStor Monitoring —Å VictoriaMetrics –∏ Grafana

–ü—Ä–æ–µ–∫—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö Huawei OceanStor —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º VictoriaMetrics –∏ Grafana.

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–û–ø–∏—Å–∞–Ω–∏–µ](#–æ–ø–∏—Å–∞–Ω–∏–µ)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–£—Ç–∏–ª–∏—Ç–∞ csv2vm.py](#—É—Ç–∏–ª–∏—Ç–∞-csv2vmpy)
- [–†–∞–±–æ—Ç–∞ —Å Grafana](#—Ä–∞–±–æ—Ç–∞-—Å-grafana)
- [–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤](#–ø—Ä–∏–º–µ—Ä—ã-–∑–∞–ø—Ä–æ—Å–æ–≤)
- [Troubleshooting](#troubleshooting)

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ CSV/TSV —Ñ–∞–π–ª–æ–≤ OceanStor –≤ VictoriaMetrics –∏ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ Grafana.

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è CSV (—Ç–∞–±—É–ª—è—Ü–∏—è, —Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π, –∑–∞–ø—è—Ç–∞—è)
- ‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ OceanStor –≤ —Ñ–æ—Ä–º–∞—Ç Prometheus
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö (batch-—Ä–µ–∂–∏–º)
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ –≤ VictoriaMetrics
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ Grafana —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
CSV —Ñ–∞–π–ª—ã ‚Üí csv2vm.py ‚Üí VictoriaMetrics (–ø–æ—Ä—Ç 8428) ‚Üí Grafana (–ø–æ—Ä—Ç 3000)
   (OceanStor)              (–∏–º–ø–æ—Ä—Ç)        (—Ö—Ä–∞–Ω–µ–Ω–∏–µ)       (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)
```

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Linux (Ubuntu/Debian)
- Python 3.8+
- Docker –∏ Docker Compose
- 2GB+ RAM
- 10GB+ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

### Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
requests
tqdm
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone <repository-url>
cd monitoring_VM_Grafana
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
python3 -m venv venv
source venv/bin/activate
pip install requests tqdm
```

### 3. –ó–∞–ø—É—Å–∫ Docker-—Å—Ç–µ–∫–∞
```bash
# –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
cat > .env << EOF
VM_PORT=8428
VM_RETENTION=12m
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASS=admin
EOF

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose up -d
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# VictoriaMetrics
curl http://localhost:8428/health

# Grafana
curl http://localhost:3000/api/health
```

### 5. –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
```bash
source venv/bin/activate
python csv2vm.py your_data.csv
```

### 6. –û—Ç–∫—Ä—ã—Ç—å Grafana
–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://localhost:3000
- –õ–æ–≥–∏–Ω: `admin`
- –ü–∞—Ä–æ–ª—å: `admin` (–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `.env`)

## üìä –£—Ç–∏–ª–∏—Ç–∞ csv2vm.py

### –û–ø–∏—Å–∞–Ω–∏–µ
–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ CSV/TSV —Ñ–∞–π–ª–æ–≤ –∏–∑ Huawei OceanStor –≤ VictoriaMetrics.

### –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å 6 –∫–æ–ª–æ–Ω–æ–∫ (—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏: —Ç–∞–±—É–ª—è—Ü–∏—è, —Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π –∏–ª–∏ –∑–∞–ø—è—Ç–∞—è):

```
Controller;KV CPU Usage (%);0A;85;2025-09-22T00:05:00Z;1758488700.0
Controller;KV CPU Usage (%);0A;68;2025-09-22T00:06:00Z;1758488760.0
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–ª–æ–Ω–æ–∫:**
- –ö–æ–ª–æ–Ω–∫–∞ 0: –¢–∏–ø –ª–µ–π–±–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Controller", "Disk", "Pool")
- –ö–æ–ª–æ–Ω–∫–∞ 1: –ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "KV CPU Usage (%)")
- –ö–æ–ª–æ–Ω–∫–∞ 2: –ó–Ω–∞—á–µ–Ω–∏–µ –ª–µ–π–±–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "0A", "0B")
- –ö–æ–ª–æ–Ω–∫–∞ 3: –ó–Ω–∞—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ (—á–∏—Å–ª–æ)
- –ö–æ–ª–æ–Ω–∫–∞ 4: –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ ISO-8601 (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- –ö–æ–ª–æ–Ω–∫–∞ 5: **Unix timestamp –≤ —Å–µ–∫—É–Ω–¥–∞—Ö** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### –§–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–î–∞–Ω–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç Prometheus:
```
huawei_kv_cpu_usage_percent{array="2102353TJWFSP3100020",controller="0A"} 85 1758488700000
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—Ä–µ—Ñ–∏–∫—Å `huawei_` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –º–µ—Ç—Ä–∏–∫–∞–º
- –ü—Ä–æ–±–µ–ª—ã –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ `_`
- –°–∏–º–≤–æ–ª `%` –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `percent`
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã —É–¥–∞–ª—è—é—Ç—Å—è
- Timestamp –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```bash
python csv2vm.py data.csv
```

#### –° —É–∫–∞–∑–∞–Ω–∏–µ–º URL VictoriaMetrics
```bash
python csv2vm.py data.csv --url http://victoriametrics:8428/api/v1/import/prometheus
```

#### –° –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —Ä–∞–∑–º–µ—Ä–∞ batch
```bash
python csv2vm.py data.csv --batch 5000
```

#### –ü–æ–ª–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å –≤—Å–µ–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
```bash
python csv2vm.py 2102353TJWFSP3100020.csv \
  --url http://localhost:8428/api/v1/import/prometheus \
  --batch 10000
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|--------------|
| `file` | –ü—É—Ç—å –∫ CSV/TSV —Ñ–∞–π–ª—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) | - |
| `--url` | URL endpoint VictoriaMetrics | http://localhost:8428/api/v1/import/prometheus |
| `--batch` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ | 10000 |

### –ü—Ä–∏–º–µ—Ä—ã –≤—ã–≤–æ–¥–∞

**–£—Å–ø–µ—à–Ω—ã–π –∏–º–ø–æ—Ä—Ç:**
```
upload: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00,  4.75it/s]
‚úÖ imported 5760 rows for array 2102353TJWFSP3100020
```

**–û—à–∏–±–∫–∞:**
```
‚ùå File not found: data.csv
‚ùå No valid data rows found
‚ùå batch 0: HTTP 400 - cannot parse timestamp
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤

–î–ª—è —Ñ–∞–π–ª–æ–≤ —Å –º–∏–ª–ª–∏–æ–Ω–∞–º–∏ —Å—Ç—Ä–æ–∫:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª—å—à–∏–π batch —Ä–∞–∑–º–µ—Ä: `--batch 50000`
2. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø–∞–º—è—Ç—å VictoriaMetrics
3. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏: `docker compose logs victoriametrics`

## üìà –†–∞–±–æ—Ç–∞ —Å Grafana

### –ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
2. –õ–æ–≥–∏–Ω: `admin`, –ø–∞—Ä–æ–ª—å: `admin`
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å

### –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞

#### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π Dashboard
- –ù–∞–∂–º–∏—Ç–µ `+` ‚Üí `Create Dashboard`
- –ù–∞–∂–º–∏—Ç–µ `Add visualization`

#### –®–∞–≥ 2: –í—ã–±—Ä–∞—Ç—å datasource
- –í—ã–±–µ—Ä–∏—Ç–µ `VictoriaMetrics`

#### –®–∞–≥ 3: –ù–∞–ø–∏—Å–∞—Ç—å –∑–∞–ø—Ä–æ—Å
```promql
huawei_kv_cpu_usage_percent{array="2102353TJWFSP3100020"}
```

#### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω
- –í –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç
- –ü—Ä–∏–º–µ—Ä: `2025-09-22 00:00:00` to `2025-09-24 23:59:59`

#### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é
- **Panel title**: "CPU Usage (%)"
- **Unit**: Percent (0-100)
- **Legend**: `{{controller}}`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ –∞–ª–µ—Ä—Ç –¥–ª—è –≤—ã—Å–æ–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ CPU:

```promql
huawei_kv_cpu_usage_percent > 90
```

## üîç –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ë–∞–∑–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã

**–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ CPU:**
```promql
huawei_kv_cpu_usage_percent{array="2102353TJWFSP3100020"}
```

**–¢–æ–ª—å–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä 0A:**
```promql
huawei_kv_cpu_usage_percent{controller="0A"}
```

### –ê–≥—Ä–µ–≥–∞—Ü–∏–∏

**–°—Ä–µ–¥–Ω–∏–π CPU –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç:**
```promql
avg_over_time(huawei_kv_cpu_usage_percent[5m])
```

**–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π CPU –ø–æ –≤—Å–µ–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º:**
```promql
max(huawei_kv_cpu_usage_percent) by (controller)
```

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π CPU –∑–∞ —á–∞—Å:**
```promql
min_over_time(huawei_kv_cpu_usage_percent[1h])
```

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã

**–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –≤—Å–µ–º –º–∞—Å—Å–∏–≤–∞–º:**
```promql
avg(huawei_kv_cpu_usage_percent) by (array)
```

**–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏:**
```promql
huawei_kv_cpu_usage_percent{controller="0A"} - huawei_kv_cpu_usage_percent{controller="0B"}
```

**–ü—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏, –∫–æ–≥–¥–∞ CPU > 80%:**
```promql
count_over_time((huawei_kv_cpu_usage_percent > 80)[1h:1m]) / 60 * 100
```

## üõ†Ô∏è Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Grafana

**–†–µ—à–µ–Ω–∏–µ 1:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω
```bash
# –£–∑–Ω–∞–π—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω timestamp –≤ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
head -1 your_data.csv
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –≤ Grafana
```

**–†–µ—à–µ–Ω–∏–µ 2:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö
```bash
curl "http://localhost:8428/api/v1/query?query=huawei_kv_cpu_usage_percent"
```

**–†–µ—à–µ–Ω–∏–µ 3:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ VictoriaMetrics
```bash
docker compose logs victoriametrics | tail -50
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ "cannot parse timestamp"

**–ü—Ä–∏—á–∏–Ω–∞:** VictoriaMetrics –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏

**–†–µ—à–µ–Ω–∏–µ:** –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–ª–æ–Ω–∫—É 5 (Unix timestamp). –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ 6 –∫–æ–ª–æ–Ω–æ–∫:
```bash
head -1 your_data.csv | awk -F';' '{print NF}'  # –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 6
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ —Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä—ã–µ/–Ω–æ–≤—ã–µ

**–°–∏–º–ø—Ç–æ–º:** –õ–æ–≥–∏ VictoriaMetrics –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "timestamp outside retention"

**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á—å—Ç–µ retention –ø–µ—Ä–∏–æ–¥:
```bash
# –í docker-compose.yml –∏–ª–∏ .env
VM_RETENTION=24m  # 24 –º–µ—Å—è—Ü–∞
docker compose up -d
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç

**–†–µ—à–µ–Ω–∏–µ 1:** –£–≤–µ–ª–∏—á—å—Ç–µ batch —Ä–∞–∑–º–µ—Ä
```bash
python csv2vm.py data.csv --batch 50000
```

**–†–µ—à–µ–Ω–∏–µ 2:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ—Å—É—Ä—Å—ã Docker
```bash
docker stats
```

### –ü—Ä–æ–±–ª–µ–º–∞: VictoriaMetrics –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã –∏ –ª–æ–≥–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–Ω—è—Ç—ã–µ –ø–æ—Ä—Ç—ã
sudo netstat -tulpn | grep 8428

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker compose logs victoriametrics

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose down -v
docker compose up -d
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
monitoring_VM_Grafana/
‚îú‚îÄ‚îÄ csv2vm.py                           # –£—Ç–∏–ª–∏—Ç–∞ –∏–º–ø–æ—Ä—Ç–∞
‚îú‚îÄ‚îÄ docker-compose.yml                  # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .env                                # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ README.md                           # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ venv/                               # Python –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ grafana/
    ‚îî‚îÄ‚îÄ provisioning/
        ‚îú‚îÄ‚îÄ datasources/                # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ datasource
        ‚îî‚îÄ‚îÄ dashboards/                 # –î–∞—à–±–æ—Ä–¥—ã Grafana
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å Grafana** –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ .env** –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤ (–Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ git)
3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø** –∫ –ø–æ—Ä—Ç–∞–º 3000 –∏ 8428 —Ñ–∞–π—Ä–≤–æ–ª–ª–æ–º
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** Docker –æ–±—Ä–∞–∑—ã

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤
docker compose pull
docker compose up -d
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üë• –ê–≤—Ç–æ—Ä—ã

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ OceanStor

## ü§ù Contributing

Pull requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –î–ª—è —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ issue.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [Troubleshooting](#troubleshooting)
2. –ò–∑—É—á–∏—Ç–µ –ª–æ–≥–∏: `docker compose logs`
3. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
