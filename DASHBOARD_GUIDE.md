# üìä –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–∞—à–±–æ—Ä–¥–∞–º Huawei OceanStor

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã

### 1. **HU Perf** (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π)
- –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- 10 –ø–∞–Ω–µ–ª–µ–π + –Ω–æ–≤–∞—è –ø–∞–Ω–µ–ª—å KV CPU Usage (%)
- –ü—Ä–æ—Å—Ç–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

### 2. **HU Perf - Complete** (–ø–æ–ª–Ω—ã–π) ‚≠ê NEW
- –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –¥–ª—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- **336 –ø–∞–Ω–µ–ª–µ–π** –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –≤ 6 –≥—Ä—É–ø–ø
- Collapsible rows –¥–ª—è —É–¥–æ–±–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ "HU Perf - Complete"

–î–∞—à–±–æ—Ä–¥ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –ø–æ —Ç–∏–ø–∞–º —Ä–µ—Å—É—Ä—Å–æ–≤. –ö–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç 56 –º–µ—Ç—Ä–∏–∫:

### üìä –ì—Ä—É–ø–ø—ã —Ä–µ—Å—É—Ä—Å–æ–≤

1. **Controller** (–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã)
   - CPU –º–µ—Ç—Ä–∏–∫–∏ (KV CPU, Avg CPU, Front-End/Back-End Partition CPU)
   - Bandwidth –º–µ—Ç—Ä–∏–∫–∏ (Read/Write/Total)
   - IOPS –º–µ—Ç—Ä–∏–∫–∏
   - Cache –º–µ—Ç—Ä–∏–∫–∏
   - I/O —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

2. **FC Port** (FC –ø–æ—Ä—Ç—ã)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
   - –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
   - IOPS
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ I/O

3. **Storage Pool** (–ü—É–ª—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞
   - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
   - –ö–æ–º–ø—Ä–µ—Å—Å–∏—è

4. **Disk Domain** (–î–∏—Å–∫–æ–≤—ã–µ –¥–æ–º–µ–Ω—ã)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–æ–≤
   - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - RAID –º–µ—Ç—Ä–∏–∫–∏

5. **LUN** (–õ–æ–≥–∏—á–µ—Å–∫–∏–µ Unit Numbers)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LUN
   - IOPS –∏ Bandwidth
   - Latency
   - Cache hit ratio

6. **Host** (–•–æ—Å—Ç—ã)
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ö–æ—Å—Ç—ã
   - I/O —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - Protocol –º–µ—Ç—Ä–∏–∫–∏ (SCSI/iSCSI/NFS/CIFS)

## üìà –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫ (56 —à—Ç.)

### Performance Metrics
- Usage (%)
- Total/Read/Write IOPS (IO/s)
- Read/Write Bandwidth (MB/s)
- Back-End Traffic (MB/s)
- VAAI Bandwidth (MB/s)

### CPU & Processing
- Avg. CPU Usage (%)
- KV CPU Usage (%)
- Avg. Corrected CPU Usage (%)
- Front-End Partition CPU Usage (%)
- Back-End Partition CPU Usage (%)

### Cache & Memory
- Read Cache Hit Ratio (%)
- Write Cache Hit Ratio (%)
- Cache Water (%)

### Response Times
- Avg. Read I/O Response Time (us)
- Avg. Write I/O Response Time (us)
- Service Time (us)
- Average Queue Depth

### I/O Size Distribution
- Avg. Read/Write/Total I/O Size (KB)
- Read I/O Granularity Distribution: [0K,4K), [4K,8K), [8K,16K), [16K,32K), [32K,64K), [64K,128K), [128K,+‚àû)
- Write I/O Granularity Distribution: [0K,4K), [4K,8K), [8K,16K), [16K,32K), [32K,64K), [64K,128K), [128K,+‚àû)

### Protocol Specific
- SCSI IOPS (IO/s)
- iSCSI IOPS (IO/s)
- NFS Operation Count Per Second
- CIFS Operation Count Per Second

### Advanced Features
- Post-Process Deduplication Read/Write Bandwidth (MB/s)
- Post-Process Deduplication Fingerprint Read/Write Bandwidth (MB/s)
- Post-Process Deduplication and Reduction Read/Write Bandwidth (MB/s)
- Full Copy Read/Write Request Bandwidth (MB/s)
- ODX Read/Write Request Bandwidth (MB/s)
- WRITE SAME Command Bandwidth (MB/s)
- Unmap Command Bandwidth (MB/s)

### Storage Metrics
- Disk Max. Usage (%)

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –û—Ç–∫—Ä—ã—Ç—å –¥–∞—à–±–æ—Ä–¥
```
http://localhost:3000
```

### 2. –í—ã–±—Ä–∞—Ç—å "HU Perf - Complete" –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–∞—à–±–æ—Ä–¥–æ–≤

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã (Variables)

#### **SN** (Serial Number)
–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä –≤–∞—à–µ–≥–æ –º–∞—Å—Å–∏–≤–∞
- –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ
- "All" –¥–ª—è –≤—Å–µ—Ö –º–∞—Å—Å–∏–≤–æ–≤

#### **Resource** (–¢–∏–ø —Ä–µ—Å—É—Ä—Å–∞)
–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ä–µ—Å—É—Ä—Å–∞ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- Controller
- FC Port
- Storage Pool
- Disk Domain
- LUN
- Host

#### **Element** (–≠–ª–µ–º–µ–Ω—Ç)
–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
- 0A, 0B (–¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤)
- disk01, disk02 (–¥–ª—è –¥–∏—Å–∫–æ–≤)
- –ò —Ç.–¥.

### 4. –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≥—Ä—É–ø–ø–∞–º

–ö–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ **—Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è** (collapsed) –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
- **–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≥—Ä—É–ø–ø—ã** —á—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å/—Å–≤–µ—Ä–Ω—É—Ç—å
- –í–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã –ø–∞–Ω–µ–ª–∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –ø–æ 2 –≤ —Ä—è–¥

### 5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω

–í –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –≤—ã–±–µ—Ä–∏—Ç–µ:
- Last 6 hours (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- Last 24 hours
- Last 7 days
- Custom range

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
1. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –≥—Ä—É–ø–ø—É "üìä Controller"
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ:
   - KV CPU Usage (%) - –∑–∞–≥—Ä—É–∑–∫–∞ CPU
   - Read/Write IOPS - –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Å–µ–∫—É–Ω–¥—É
   - Read/Write Bandwidth - –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
   - Cache Hit Ratio - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫—ç—à–∞

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—É–ª–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è
1. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –≥—Ä—É–ø–ø—É "üìä Storage Pool"
2. –í—ã–±–µ—Ä–∏—Ç–µ Resource = "Storage Pool"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - Usage (%) - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞
   - Total IOPS - –Ω–∞–≥—Ä—É–∑–∫–∞
   - Deduplication –º–µ—Ç—Ä–∏–∫–∏

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å LUN
1. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –≥—Ä—É–ø–ø—É "üìä LUN"
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π LUN –≤ Element
3. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ:
   - Response Time - –∑–∞–¥–µ—Ä–∂–∫–∏
   - Queue Depth - –æ—á–µ—Ä–µ–¥—å
   - I/O Size Distribution - –ø–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–∞–≥—Ä—É–∑–∫–∏

## üîß –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞—à–±–æ—Ä–¥–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏–ª–∏ —Ä–µ—Å—É—Ä—Å—ã:

1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `resource_metric_mapping.py`:
```python
DEFAULT_RESOURCES = ["207", "212", ...]  # –î–æ–±–∞–≤—å—Ç–µ/—É–¥–∞–ª–∏—Ç–µ —Ä–µ—Å—É—Ä—Å—ã
DEFAULT_METRICS = ["18", "22", ...]      # –î–æ–±–∞–≤—å—Ç–µ/—É–¥–∞–ª–∏—Ç–µ –º–µ—Ç—Ä–∏–∫–∏
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä:
```bash
python3 generate_dashboard.py
```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Grafana:
```bash
docker compose restart grafana
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–†–µ—Å—É—Ä—Å–æ–≤**: 6
- **–ú–µ—Ç—Ä–∏–∫ –Ω–∞ —Ä–µ—Å—É—Ä—Å**: 56
- **–í—Å–µ–≥–æ –ø–∞–Ω–µ–ª–µ–π**: 336
- **–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö**: Prometheus/VictoriaMetrics
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: Real-time

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **–ù–µ –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –≤—Å–µ –≥—Ä—É–ø–ø—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** - —ç—Ç–æ –º–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã** –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö
3. **–°—É–∂–∞–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω** –ø—Ä–∏ –¥–µ—Ç–∞–ª—å–Ω–æ–º –∞–Ω–∞–ª–∏–∑–µ
4. **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞—à–±–æ—Ä–¥** –¥–ª—è –±—ç–∫–∞–ø–∞ —á–µ—Ä–µ–∑ UI Grafana

## üÜò Troubleshooting

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∞—Ö
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã: `curl 'http://localhost:8428/api/v1/label/__name__/values'`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã–±—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π SN
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω

### –î–∞—à–±–æ—Ä–¥ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Grafana: `docker compose restart grafana`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs grafana`

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
1. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π Resource –≤–º–µ—Å—Ç–æ "All"
2. –£–º–µ–Ω—å—à–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä Element –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

---

**–°–æ–∑–¥–∞–Ω–æ**: 30 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: Huawei OceanStor, VictoriaMetrics, Grafana 11.0+
