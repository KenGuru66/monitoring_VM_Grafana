# üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥—É Grafana Dashboards
## Huawei Storage Performance Monitoring Project

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** –û–∫—Ç—è–±—Ä—å 2025  
**–ê–≤—Ç–æ—Ä:** AI Assistant  

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–¥–∞–Ω–Ω—ã—Ö)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞—Ä—Ö–∏–≤–æ–≤](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∞—Ä—Ö–∏–≤–æ–≤)
4. [–ü–æ—à–∞–≥–æ–≤—ã–π —Ç—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥](#–ø–æ—à–∞–≥–æ–≤—ã–π-—Ç—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥)
5. [–†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä: —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –º–µ—Ç—Ä–∏–∫–∏](#—Ä–µ–∞–ª—å–Ω—ã–π-–ø—Ä–∏–º–µ—Ä)
6. [–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è](#—á–∞—Å—Ç—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã-–∏-—Ä–µ—à–µ–Ω–∏—è)
7. [–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã](#–ø–æ–ª–µ–∑–Ω—ã–µ-–∫–æ–º–∞–Ω–¥—ã)

---

## üéØ –û–±–∑–æ—Ä

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç –≤–∞–º:
- ‚úÖ –ü—Ä–æ—Å–ª–µ–¥–∏—Ç—å –ø—É—Ç—å –¥–∞–Ω–Ω—ã—Ö –æ—Ç —Å—ã—Ä—ã—Ö –ª–æ–≥–æ–≤ –¥–æ Grafana
- ‚úÖ –ù–∞–π—Ç–∏ –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ dashboard
- ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –º–µ—Ç—Ä–∏–∫

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü—É—Ç—å –¥–∞–Ω–Ω—ã—Ö: –æ—Ç –ª–æ–≥–æ–≤ –¥–æ Grafana

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         –ü–£–¢–¨ –î–ê–ù–ù–´–•                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1Ô∏è‚É£ –°–´–†–´–ï –õ–û–ì–ò (.zip –∞—Ä—Ö–∏–≤—ã)
   ‚îú‚îÄ‚îÄ Storage_History_Performance_*.zip
   ‚îî‚îÄ‚îÄ –°–æ–¥–µ—Ä–∂–∏—Ç: .tgz —Ñ–∞–π–ª—ã

2Ô∏è‚É£ –ê–†–•–ò–í–´ TGZ (.tgz —Ñ–∞–π–ª—ã)
   ‚îú‚îÄ‚îÄ PerfData_OceanStorDorado6000V6_SN_2102355THQFSQ2100014_SP0_0_20251020000400.tgz
   ‚îî‚îÄ‚îÄ –°–æ–¥–µ—Ä–∂–∏—Ç: .dat —Ñ–∞–π–ª (–±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

3Ô∏è‚É£ –ë–ò–ù–ê–†–ù–´–ï –î–ê–ù–ù–´–ï (.dat —Ñ–∞–π–ª—ã)
   ‚îú‚îÄ‚îÄ PerfData_*.dat
   ‚îú‚îÄ‚îÄ –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
   ‚îÇ   ‚îú‚îÄ‚îÄ –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ñ–∞–π–ª–∞ (SN, Equipment Name)
   ‚îÇ   ‚îú‚îÄ‚îÄ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏ (StartTime, EndTime, Archive=–∏–Ω—Ç–µ—Ä–≤–∞–ª)
   ‚îÇ   ‚îú‚îÄ‚îÄ –ö–∞—Ä—Ç–∞ –º–µ—Ç—Ä–∏–∫ (Resource ID, Metric ID, Element Names)
   ‚îÇ   ‚îî‚îÄ‚îÄ –ë–∏–Ω–∞—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (4 –±–∞–π—Ç–∞ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ, signed int32)
   ‚îî‚îÄ‚îÄ –ü–∞—Ä—Å–µ—Ä—ã:
       ‚îú‚îÄ‚îÄ huawei_streaming_pipeline.py ‚Üí VictoriaMetrics
       ‚îî‚îÄ‚îÄ Huawei_perf_parser_v0.2_parallel.py ‚Üí CSV

4Ô∏è‚É£ CSV –§–ê–ô–õ–´ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   ‚îú‚îÄ‚îÄ 2102355THQFSQ2100014.csv
   ‚îú‚îÄ‚îÄ –§–æ—Ä–º–∞—Ç: Resource;Metric;Element;Value;Timestamp;UnixTime
   ‚îî‚îÄ‚îÄ –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è METRIC_CONVERSION (KB‚ÜíMB, us‚Üíms)

5Ô∏è‚É£ VICTORIAMETRICS (Time-series –ë–î)
   ‚îú‚îÄ‚îÄ URL: http://localhost:8428
   ‚îú‚îÄ‚îÄ –§–æ—Ä–º–∞—Ç Prometheus:
   ‚îÇ   huawei_metric_name{Element="X",Resource="Y",SN="Z",scrape_interval="60"} value timestamp_ms
   ‚îî‚îÄ‚îÄ –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:
       ‚îú‚îÄ‚îÄ sanitize_metric_name() - –æ—á–∏—Å—Ç–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏–π
       ‚îî‚îÄ‚îÄ METRIC_CONVERSION - –∫–æ–Ω–≤–µ—Ä—Å–∏—è –µ–¥–∏–Ω–∏—Ü

6Ô∏è‚É£ GRAFANA (–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)
   ‚îú‚îÄ‚îÄ URL: http://localhost:3000
   ‚îú‚îÄ‚îÄ Dashboard: Huawei-OceanStor-Real-Data.json
   ‚îî‚îÄ‚îÄ Queries: PromQL –∑–∞–ø—Ä–æ—Å—ã –∫ VictoriaMetrics
```

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞—Ä—Ö–∏–≤–æ–≤

### –ò–µ—Ä–∞—Ä—Ö–∏—è —Ñ–∞–π–ª–æ–≤

```
Storage_History_Performance_DOrado6000v6_FC_link_trans.zip
‚îú‚îÄ‚îÄ 2025-10-20/
‚îÇ   ‚îú‚îÄ‚îÄ PerfData_..._SN_2102355THQFSQ2100014_SP0_0_20251020000400.tgz
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PerfData_..._SP0_0_20251020000400.dat (–±–∏–Ω–∞—Ä–Ω—ã–π)
‚îÇ   ‚îú‚îÄ‚îÄ PerfData_..._SN_2102355THQFSQ2100014_SP1_0_20251020000400.tgz
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PerfData_..._SP1_0_20251020000400.dat
‚îÇ   ‚îî‚îÄ‚îÄ ... (300 —Ñ–∞–π–ª–æ–≤)
‚îî‚îÄ‚îÄ 2025-10-21/
    ‚îî‚îÄ‚îÄ ... (–µ—â–µ —Ñ–∞–π–ª—ã)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞

```
PerfData_OceanStorDorado6000V6_SN_2102355THQFSQ2100014_SP0_0_20251020000400.tgz
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚î¨‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              Model                    Serial Number  ‚îÇ    –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
                                                   SP  ‚îÇ    (YYYYMMDDHHMMSS)
                                                    0  ‚îî‚îÄ Controller 0 or 1
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ .dat —Ñ–∞–π–ª–∞ (–±–∏–Ω–∞—Ä–Ω—ã–π)

```
[–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ñ–∞–π–ª–∞]
‚îú‚îÄ‚îÄ bit_correct (32 –±–∞–π—Ç–∞)
‚îú‚îÄ‚îÄ bit_msg_version (4 –±–∞–π—Ç–∞)
‚îú‚îÄ‚îÄ bit_equip_sn (256 –±–∞–π—Ç) ‚Üí "SN_2102355THQFSQ2100014"
‚îú‚îÄ‚îÄ bit_equip_name (41 –±–∞–π—Ç) ‚Üí "OceanStorDorado6000V6"
‚îî‚îÄ‚îÄ bit_equip_data_length (4 –±–∞–π—Ç–∞)

[–í—Ä–µ–º–µ–Ω–Ω–æ–π –±–ª–æ–∫ 1]
‚îú‚îÄ‚îÄ bit_map_type (4 –±–∞–π—Ç–∞)
‚îú‚îÄ‚îÄ bit_map_length (4 –±–∞–π—Ç–∞)
‚îú‚îÄ‚îÄ bit_map_value (JSON –≤–Ω—É—Ç—Ä–∏):
‚îÇ   ‚îú‚îÄ‚îÄ "StartTime": "1760918640"  (Unix timestamp)
‚îÇ   ‚îú‚îÄ‚îÄ "EndTime": "1760919540"
‚îÇ   ‚îú‚îÄ‚îÄ "Archive": "60"  (–∏–Ω—Ç–µ—Ä–≤–∞–ª —Å–±–æ—Ä–∞, —Å–µ–∫—É–Ω–¥—ã)
‚îÇ   ‚îî‚îÄ‚îÄ "Map": {
‚îÇ       "212": {  ‚Üê Resource ID (FC Port)
‚îÇ         "IDs": ["0", "1", ...],  ‚Üê ID —ç–ª–µ–º–µ–Ω—Ç–æ–≤
‚îÇ         "Names": ["CTE0.A.IOM0.P0", ...],
‚îÇ         "DataTypes": ["1183", ...]  ‚Üê Metric IDs
‚îÇ       }
‚îÇ     }
‚îî‚îÄ‚îÄ [–ë–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫]
    ‚îî‚îÄ‚îÄ 4 –±–∞–π—Ç–∞ (signed int32) √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—ç–ª–µ–º–µ–Ω—Ç–æ–≤ √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–º–µ—Ç—Ä–∏–∫ √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ç–æ—á–µ–∫

[–í—Ä–µ–º–µ–Ω–Ω–æ–π –±–ª–æ–∫ 2]
‚îî‚îÄ‚îÄ ... (–ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è)
```

---

## üîç –ü–æ—à–∞–≥–æ–≤—ã–π —Ç—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Grafana

**–ü—Ä–æ–±–ª–µ–º–∞:** Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "No data"

**–î–µ–π—Å—Ç–≤–∏—è:**

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Grafana dashboard:**
   ```
   http://localhost:3000/d/huawei-oceanstor-real/huawei-oceanstor-real-data
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω:**
   - –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –≤—Ä–µ–º—è –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –ø–µ—Ä–∏–æ–¥ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
   - ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –î–∞–Ω–Ω—ã–µ –∏–∑ –∞—Ä—Ö–∏–≤–æ–≤ –º–æ–≥—É—Ç –±—ã—Ç—å –≤ "–±—É–¥—É—â–µ–º" –∏–ª–∏ "–ø—Ä–æ—à–ª–æ–º"

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
   - `$SN` - —Å–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä –º–∞—Å—Å–∏–≤–∞
   - `$Element` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç (–ø–æ—Ä—Ç, –¥–∏—Å–∫, LUN)
   - `$Resource` - —Ç–∏–ø —Ä–µ—Å—É—Ä—Å–∞ (FC Port, Controller, Disk)

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Query –≤ –ø–∞–Ω–µ–ª–∏:**
   - –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ ‚Üí Edit
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ PromQL –∑–∞–ø—Ä–æ—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä:
     ```
     huawei_read_i_o_granularity_distribution_128kinfpercent{SN=~"$SN", Resource=~"FC Port", Element=~"$Element"}
     ```

---

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ VictoriaMetrics

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –ï—Å—Ç—å –ª–∏ –≤–æ–æ–±—â–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è SN?**

```bash
curl -s "http://localhost:8428/api/v1/label/SN/values?start=1571875200&end=1730000000" | jq -r '.data[]'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
2102355THQFSQ2100014
```

**–ï—Å–ª–∏ –ø—É—Å—Ç–æ** ‚Üí –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å streaming pipeline.

---

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ö–∞–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã –µ—Å—Ç—å –¥–ª—è —ç—Ç–æ–≥–æ SN?**

```bash
curl -s "http://localhost:8428/api/v1/label/Resource/values?match[]=\{SN=\"2102355THQFSQ2100014\"\}&start=1571875200&end=1730000000" | jq -r '.data[]'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Controller
FC Port
Disk
LUN
...
```

---

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –ö–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –µ—Å—Ç—å –¥–ª—è FC Port?**

```bash
curl -s "http://localhost:8428/api/v1/series?match[]=%7BSN=%222102355THQFSQ2100014%22,Resource=%22FC+Port%22%7D&start=1571875200&end=1730000000" | jq -r '.data[].__name__' | grep granularity | sort -u
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
huawei_read_i_o_granularity_distribution_0k4kpercent
huawei_read_i_o_granularity_distribution_128kinfpercent
huawei_read_i_o_granularity_distribution_16k32k_percent
...
```

---

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 4: –£–∑–Ω–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞–Ω–Ω—ã—Ö**

```bash
curl -s "http://localhost:8428/api/v1/query_range?query=huawei_read_bandwidth_mb_s%7BSN=%222102355THQFSQ2100014%22,Resource=%22FC+Port%22%7D&start=1571875200&end=1761341929&step=86400" | jq '.data.result[0] | {metric: .metric, first: .values[0], last: .values[-1]}'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "metric": {
    "__name__": "huawei_read_bandwidth_mb_s",
    "Element": "CTE0.A.IOM0.P0",
    "Resource": "FC Port",
    "SN": "2102355THQFSQ2100014",
    "scrape_interval": "60"
  },
  "first": [1760918400, "405"],  ‚Üê Unix timestamp, –∑–Ω–∞—á–µ–Ω–∏–µ
  "last": [1761091200, "695"]
}
```

**–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Unix timestamp –≤ –¥–∞—Ç—É:**
```bash
date -d @1760918400 '+%Y-%m-%d %H:%M:%S'
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 2025-10-20 00:00:00
```

---

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 5: –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏**

```bash
curl -s "http://localhost:8428/api/v1/query_range?query=huawei_read_i_o_granularity_distribution_128kinfpercent%7BSN=%222102355THQFSQ2100014%22,Resource=%22FC+Port%22,Element=%22CTE0.A.IOM0.P0%22%7D&start=1760918400&end=1761091200&step=3600" | jq '.data.result[0] | {metric: .metric, values: .values | length, first: .values[0], last: .values[-1]}'
```

---

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Å—ã—Ä—ã—Ö .dat —Ñ–∞–π–ª–∞—Ö

**–ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç `debug_metric_value.py`:**

```bash
# 1. –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å .tgz —Ñ–∞–π–ª
unzip -p Data2csv/logs/ARCHIVE.zip "2025-10-20/PerfData_*_SP0_0_20251020000400.tgz" | tar -xzf - -C temp_debug/

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –ø–æ–∏—Å–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è
python3 debug_metric_value.py \
    temp_debug/PerfData_*.dat \
    212 \
    1183 \
    "CTE0.A.IOM0.P0" \
    "2025-10-20 00:01:00"
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `212` - Resource ID (FC Port, —Å–º. `Data2csv/RESOURCE_DICT.py`)
- `1183` - Metric ID (Read I/O Granularity Distribution: [128K,+‚àû), —Å–º. `Data2csv/METRIC_DICT.py`)
- `"CTE0.A.IOM0.P0"` - Element Name (–∏–º—è –ø–æ—Ä—Ç–∞)
- `"2025-10-20 00:01:00"` - —Ü–µ–ª–µ–≤–æ–µ –≤—Ä–µ–º—è

**–í—ã–≤–æ–¥ —Å–∫—Ä–∏–ø—Ç–∞:**
```
================================================================================
üîç –ü–û–ò–°–ö –ó–ù–ê–ß–ï–ù–ò–Ø –ú–ï–¢–†–ò–ö–ò –í –°–´–†–û–ú .DAT –§–ê–ô–õ–ï
================================================================================
üìÅ –§–∞–π–ª: PerfData_OceanStorDorado6000V6_SN_2102355THQFSQ2100014_SP0_0_20251020000400.dat
üìä –†–µ—Å—É—Ä—Å: FC Port (ID: 212)
üìà –ú–µ—Ç—Ä–∏–∫–∞: Read I/O Granularity Distribution: [128K,+‚àû)(%) (ID: 1183)
üéØ –≠–ª–µ–º–µ–Ω—Ç: CTE0.A.IOM0.P0
‚è∞ –¶–µ–ª–µ–≤–æ–µ –≤—Ä–µ–º—è: 2025-10-20 00:01:00
================================================================================

üìã –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ñ–∞–π–ª–∞:
   Serial Number: SN_2102355THQFSQ2100014
   Equipment Name: OceanStorDorado6000V6

üìÖ –í—Ä–µ–º–µ–Ω–Ω–æ–π –±–ª–æ–∫:
   –ù–∞—á–∞–ª–æ: 2025-10-20 00:04:00
   –ö–æ–Ω–µ—Ü:  2025-10-20 00:19:00
   –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–±–æ—Ä–∞: 60s
   –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫: 15

‚úÖ –ù–∞–π–¥–µ–Ω–∞ –º–µ—Ç—Ä–∏–∫–∞!
   –†–µ—Å—É—Ä—Å: 212 (FC Port)
   –ú–µ—Ç—Ä–∏–∫–∞: 1183 (Read I/O Granularity Distribution: [128K,+‚àû)(%))
   –≠–ª–µ–º–µ–Ω—Ç: CTE0.A.IOM0.P0

üìä –ó–Ω–∞—á–µ–Ω–∏—è –≤ —ç—Ç–æ–º –±–ª–æ–∫–µ:
   [  0] 2025-10-20 00:04:00 | –ó–Ω–∞—á–µ–Ω–∏–µ:     15
   [  1] 2025-10-20 00:05:00 | –ó–Ω–∞—á–µ–Ω–∏–µ:     16
   [  2] 2025-10-20 00:06:00 | –ó–Ω–∞—á–µ–Ω–∏–µ:     19
   [  3] 2025-10-20 00:07:00 | –ó–Ω–∞—á–µ–Ω–∏–µ:     14
   [  4] 2025-10-20 00:08:00 | –ó–Ω–∞—á–µ–Ω–∏–µ:     16
   ...
```

---

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ CSV (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è CSV:**

```bash
python3 Data2csv/Huawei_perf_parser_v0.2_parallel.py \
    -i Data2csv/logs/ARCHIVE.zip \
    -o temp_csv/ \
    --all-metrics
```

**–ü–æ–∏—Å–∫ –∑–Ω–∞—á–µ–Ω–∏—è –≤ CSV:**

```bash
# –§–æ—Ä–º–∞—Ç CSV: Resource;Metric;Element;Value;Timestamp;UnixTime
grep "FC Port;Read I/O Granularity Distribution: \[128K,+‚àû\](%);CTE0.A.IOM0.P0" \
    temp_csv/2102355THQFSQ2100014.csv | \
    grep "2025-10-20T00:0[4-6]" | \
    head -5
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
FC Port;Read I/O Granularity Distribution: [128K,+‚àû)(%);CTE0.A.IOM0.P0;15.0;2025-10-20T00:04:00Z;1760918640.0
FC Port;Read I/O Granularity Distribution: [128K,+‚àû)(%);CTE0.A.IOM0.P0;16.0;2025-10-20T00:05:00Z;1760918700.0
FC Port;Read I/O Granularity Distribution: [128K,+‚àû)(%);CTE0.A.IOM0.P0;19.0;2025-10-20T00:06:00Z;1760918760.0
```

---

## üìä –†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä: —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –º–µ—Ç—Ä–∏–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞

Dashboard –¥–ª—è FC Port, –ø–∞–Ω–µ–ª—å **"Read I/O Granularity Distribution: [128K,+‚àû)"** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "No data".

### –ú–µ—Ç—Ä–∏–∫–∞

- **–ù–∞–∑–≤–∞–Ω–∏–µ:** Read I/O Granularity Distribution: [128K,+‚àû)(%)
- **Resource ID:** 212 (FC Port)
- **Metric ID:** 1183
- **Element:** CTE0.A.IOM0.P0
- **–í—Ä–µ–º—è:** 2025-10-20 00:04:00

---

### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

#### 1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º VictoriaMetrics

```bash
# –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫ granularity
curl -s "http://localhost:8428/api/v1/label/__name__/values?start=1571875200&end=1730000000" | \
    jq -r '.data[]' | grep granularity

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# huawei_read_i_o_granularity_distribution_128kinfpercent  ‚Üê –ï–°–¢–¨!
```

‚úÖ –ú–µ—Ç—Ä–∏–∫–∞ **—Å—É—â–µ—Å—Ç–≤—É–µ—Ç** –≤ VictoriaMetrics.

---

#### 2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º Query –≤ Grafana Dashboard

```bash
# –°–º–æ—Ç—Ä–∏–º —á—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –≤ dashboard JSON
grep -A5 "Read I/O Granularity Distribution: \[128K,+‚àû\)" \
    grafana/provisioning/dashboards/Huawei-OceanStor-Real-Data.json | \
    grep "expr"

# –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è FC Port (—Å—Ç—Ä–æ–∫–∞ 90318):
# "expr": "huawei_read_i_o_granularity_distribution_128kinf_percent{...}"
#                                                            ^^^
#                                                    –ü–û–î–ß–ï–†–ö–ò–í–ê–ù–ò–ï!
```

‚ùå **–ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞!** –í dashboard –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
```
huawei_read_i_o_granularity_distribution_128kinf_percent
                                            ^^^
```

–ê –≤ VictoriaMetrics –º–µ—Ç—Ä–∏–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è:
```
huawei_read_i_o_granularity_distribution_128kinfpercent
                                            ^^^
                                        –ë–ï–ó –ü–û–î–ß–ï–†–ö–ò–í–ê–ù–ò–Ø
```

---

#### 3Ô∏è‚É£ –ò—Å–ø—Ä–∞–≤–ª—è–µ–º Dashboard

```bash
# –ù–∞–π—Ç–∏ –∏ –∑–∞–º–µ–Ω–∏—Ç—å –≤ JSON
sed -i 's/128kinf_percent/128kinfpercent/g' \
    grafana/provisioning/dashboards/Huawei-OceanStor-Real-Data.json

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Grafana
docker compose restart grafana
```

---

#### 4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è

**–í —Å—ã—Ä–æ–º .dat —Ñ–∞–π–ª–µ:**
```
2025-10-20 00:04:00 | –ó–Ω–∞—á–µ–Ω–∏–µ: 15
2025-10-20 00:05:00 | –ó–Ω–∞—á–µ–Ω–∏–µ: 16
2025-10-20 00:06:00 | –ó–Ω–∞—á–µ–Ω–∏–µ: 19
```

**–í VictoriaMetrics:**
```bash
curl -s "http://localhost:8428/api/v1/query?query=huawei_read_i_o_granularity_distribution_128kinfpercent%7BSN=%222102355THQFSQ2100014%22,Resource=%22FC+Port%22,Element=%22CTE0.A.IOM0.P0%22%7D&time=1760918640" | jq '.data.result[0].value'

# –†–µ–∑—É–ª—å—Ç–∞—Ç: [1760918640, "15"]
```

‚úÖ **–ó–Ω–∞—á–µ–Ω–∏—è —Å–æ–≤–ø–∞–¥–∞—é—Ç!**

---

### üéØ –ü–æ—á–µ–º—É –≤–æ–∑–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞?

#### –§—É–Ω–∫—Ü–∏—è sanitize_metric_name() –≤ streaming pipeline

```python
def sanitize_metric_name(name: str) -> str:
    """–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç Prometheus."""
    result = name.replace("(%)", "percent").replace(" (%)", "_percent")
    result = result.replace("(", "").replace(")", "")
    result = result.replace("+‚àû", "inf").replace("+", "plus").replace("‚àû", "inf")
    result = result.replace("/", "_").replace("-", "_")
    # ...
    result = "_".join(result.lower().split())  # ‚Üê –£–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–±–µ–ª—ã
    while "__" in result:
        result = result.replace("__", "_")     # ‚Üê –£–±–∏—Ä–∞–µ—Ç –¥–≤–æ–π–Ω—ã–µ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è
    return result.strip("_")
```

**–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è:**
```
Read I/O Granularity Distribution: [128K,+‚àû)(%)
                ‚Üì replace (%)", "percent")
Read I/O Granularity Distribution: [128K,+‚àû)percent
                ‚Üì replace "+‚àû", "inf"
Read I/O Granularity Distribution: [128Kinf)percent
                ‚Üì replace "[", "", "]", ""
Read I/O Granularity Distribution: 128Kinfpercent
                ‚Üì "_".join(lower().split())
read_i_o_granularity_distribution_128kinfpercent
                ‚Üì –¥–æ–±–∞–≤–ª—è–µ–º –ø—Ä–µ—Ñ–∏–∫—Å "huawei_"
huawei_read_i_o_granularity_distribution_128kinfpercent
```

‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ** (–ë–ï–ó –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ "percent")

---

## üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "No data" –≤ Grafana

**–ü—Ä–∏—á–∏–Ω—ã:**
1. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω
2. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ Query
3. ‚ùå –î–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ VictoriaMetrics
4. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã (`$SN`, `$Element`, `$Resource`)

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ VM (—Å–º. –®–∞–≥ 2)
2. –°—Ä–∞–≤–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ Query –∏ VM
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞–Ω–Ω—ã—Ö
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ dashboard

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –º–µ—Ç—Ä–∏–∫

**–°–∏–º–ø—Ç–æ–º—ã:**
- Dashboard Query: `huawei_metric_name_wrong`
- VictoriaMetrics: `huawei_metric_name_correct`

**–ü—Ä–∏—á–∏–Ω–∞:**
–ú–µ—Ç—Ä–∏–∫–∞ –±—ã–ª–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –≤ `sanitize_metric_name()`, –Ω–æ dashboard –Ω–µ –æ–±–Ω–æ–≤–ª—ë–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –£–∑–Ω–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ VM
curl -s "http://localhost:8428/api/v1/label/__name__/values" | \
    jq -r '.data[]' | grep <pattern>

# 2. –û–±–Ω–æ–≤–∏—Ç—å dashboard JSON
sed -i 's/OLD_NAME/NEW_NAME/g' \
    grafana/provisioning/dashboards/Huawei-OceanStor-Real-Data.json

# 3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Grafana
docker compose restart grafana
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –î–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –≤ VM, –Ω–æ –Ω–µ –≤ Grafana

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–µ—à Grafana –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å datasource.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å datasource
curl http://localhost:3000/api/datasources

# 2. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å Shift+F5 (hard refresh)

# 3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Grafana
docker compose restart grafana

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs grafana | grep -i error
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Unknown Metric IDs –≤ –ª–æ–≥–∞—Ö

**–°–∏–º–ø—Ç–æ–º—ã:**
```
WARNING - Found 5 unknown metric IDs in file.dat: ['1234', '5678', ...]
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–ù–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ—è–≤–∏–ª–∏—Å—å –≤ –ª–æ–≥–∞—Ö, –Ω–æ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `METRIC_DICT.py`.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ù–∞–π—Ç–∏ unknown IDs –≤ –ª–æ–≥–∞—Ö
grep -i "unknown.*IDs" streaming_pipeline.log | \
    grep -oP 'metric IDs.*: \K\[.*\]' | \
    tr ',' '\n' | sort -u

# 2. –î–æ–±–∞–≤–∏—Ç—å –≤ Data2csv/METRIC_DICT.py
# "1234": "New Metric Name",

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
python3 huawei_streaming_pipeline.py -i logs.zip
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 5: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- Bandwidth –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–≥—Ä–æ–º–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (KB –≤–º–µ—Å—Ç–æ MB)
- Latency –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–≥—Ä–æ–º–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (us –≤–º–µ—Å—Ç–æ ms)

**–ü—Ä–∏—á–∏–Ω–∞:**
–ú–µ—Ç—Ä–∏–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `METRIC_CONVERSION.py`.

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –î–æ–±–∞–≤–∏—Ç—å –≤ Data2csv/METRIC_CONVERSION.py
METRIC_CONVERSION = {
    "311": 1024,  # Throughput (MB/s) - —Ä–µ–∞–ª—å–Ω–æ –≤ KB/s
    "384": 1000,  # Avg. Read I/O Response Time(us) - –¥–µ–ª–∏–º –Ω–∞ 1000 –¥–ª—è ms
    # ...
}
```

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### VictoriaMetrics API

```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ SN
curl -s "http://localhost:8428/api/v1/label/SN/values?start=1571875200" | jq

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è SN
curl -s "http://localhost:8428/api/v1/series?match[]=%7BSN=%22${SN}%22%7D" | \
    jq -r '.data[].__name__' | sort -u

# –ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏
curl -s "http://localhost:8428/api/v1/query?query=${METRIC}%7BSN=%22${SN}%22%7D&time=${UNIX_TS}" | jq

# –ü–æ–ª—É—á–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω –∑–Ω–∞—á–µ–Ω–∏–π
curl -s "http://localhost:8428/api/v1/query_range?query=${METRIC}&start=${START}&end=${END}&step=300" | jq

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è SN
curl -X POST "http://localhost:8428/api/v1/admin/tsdb/delete_series?match[]=%7BSN=%22${SN}%22%7D"
```

---

### –†–∞–±–æ—Ç–∞ —Å –∞—Ä—Ö–∏–≤–∞–º–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ ZIP
unzip -l archive.zip | head -20

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ TGZ
tar -tzf file.tgz

# –ò–∑–≤–ª–µ—á—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª –∏–∑ ZIP
unzip -p archive.zip "2025-10-20/PerfData_*_SP0_0_*.tgz" | tar -xzf -

# –ù–∞–π—Ç–∏ —Ñ–∞–π–ª—ã –ø–æ –¥–∞—Ç–µ
unzip -l archive.zip | grep "20251020"
```

---

### –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö

```bash
# Streaming ‚Üí VictoriaMetrics (–ë–ï–ó CSV)
python3 huawei_streaming_pipeline.py \
    -i archive.zip \
    --vm-url http://localhost:8428/api/v1/import/prometheus \
    --all-metrics

# CSV –ø–∞—Ä—Å–∏–Ω–≥ (Wide format)
python3 Data2csv/Huawei_perf_parser_v0.2_parallel.py \
    -i archive.zip \
    -o output_csv/ \
    --all-metrics

# –ü–æ–∏—Å–∫ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
python3 debug_metric_value.py \
    file.dat \
    <resource_id> \
    <metric_id> \
    "<element>" \
    "YYYY-MM-DD HH:MM:SS"
```

---

### Grafana

```bash
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
docker compose restart grafana

# –õ–æ–≥–∏
docker compose logs -f grafana

# –ü—Ä–æ–≤–µ—Ä–∫–∞ datasource
curl http://localhost:3000/api/datasources

# –í–∞–ª–∏–¥–∞—Ü–∏—è JSON dashboard
jq . grafana/provisioning/dashboards/Huawei-OceanStor-Real-Data.json > /dev/null
```

---

### –ü–æ–∏—Å–∫ –≤ —Å–ª–æ–≤–∞—Ä—è—Ö

```bash
# –ù–∞–π—Ç–∏ Metric ID –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
grep -i "granularity.*128" Data2csv/METRIC_DICT.py

# –ù–∞–π—Ç–∏ Resource ID
grep -i "FC Port" Data2csv/RESOURCE_DICT.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é –º–µ—Ç—Ä–∏–∫–∏
grep "\"311\"" Data2csv/METRIC_CONVERSION.py
```

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç —Ç—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥–∞

–ö–æ–≥–¥–∞ dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "No data":

- [ ] **–®–∞–≥ 1:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ VictoriaMetrics
  ```bash
  curl -s "http://localhost:8428/api/v1/label/SN/values" | jq
  ```

- [ ] **–®–∞–≥ 2:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞–Ω–Ω—ã—Ö
  ```bash
  curl -s "http://localhost:8428/api/v1/query_range?..." | jq '.data.result[0].values | [.[0], .[-1]]'
  ```

- [ ] **–®–∞–≥ 3:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω –≤ Grafana
  - –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –≤—Ä–µ–º—è –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
  - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Custom range

- [ ] **–®–∞–≥ 4:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ Query
  ```bash
  grep "expr.*${PANEL_NAME}" grafana/provisioning/dashboards/*.json
  ```

- [ ] **–®–∞–≥ 5:** –°—Ä–∞–≤–Ω–∏—Ç—å —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –≤ VictoriaMetrics
  ```bash
  curl -s "http://localhost:8428/api/v1/label/__name__/values" | jq -r '.data[]' | grep <pattern>
  ```

- [ ] **–®–∞–≥ 6:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
  ```bash
  sed -i 's/wrong_name/correct_name/g' grafana/provisioning/dashboards/*.json
  docker compose restart grafana
  ```

- [ ] **–®–∞–≥ 7:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  ```bash
  python3 debug_metric_value.py ...
  ```

---

## üéì –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **README.md** - –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- **Data2csv/METRIC_DICT.py** - 743 –º–µ—Ç—Ä–∏–∫–∏
- **Data2csv/RESOURCE_DICT.py** - 51 —Ç–∏–ø —Ä–µ—Å—É—Ä—Å–æ–≤
- **Data2csv/METRIC_CONVERSION.py** - 49 –º–µ—Ç—Ä–∏–∫ —Å –∫–æ–Ω–≤–µ—Ä—Å–∏–µ–π
- **huawei_streaming_pipeline.py** - Streaming –ø–∞—Ä—Å–µ—Ä
- **Data2csv/Huawei_perf_parser_v0.2_parallel.py** - CSV –ø–∞—Ä—Å–µ—Ä

---

## üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç—É –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ README.md
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `streaming_pipeline.log`, `api.log`
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `debug_metric_value.py` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –û–∫—Ç—è–±—Ä—å 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  

