# üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è NFSv3 Metric ID ‚Üí Procedure Name

## üìã –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –∞—Ä—Ö–∏–≤–∞—Ö Huawei OceanStor –µ—Å—Ç—å –º–µ—Ç—Ä–∏–∫–∏ NFSv3 (Resource ID `1000` - "Controller NFSV3"), –Ω–æ –∏—Ö Metric IDs (`1099-1138`) –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–Ω—ã –≤ `METRIC_DICT.py`.

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ì—Ä–∞—Ñ–∏–∫–∏ –≤ —É—Ç–∏–ª–∏—Ç–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ NFSv3 (REMOVE, GETATTR, CREATE –∏ —Ç.–¥.)
- –í Grafana –Ω–µ—Ç –ø–∞–Ω–µ–ª–µ–π –¥–ª—è —ç—Ç–∏—Ö –º–µ—Ç—Ä–∏–∫
- –ü—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ —Å `--all-metrics` —ç—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ CSV/VictoriaMetrics

**–¶–µ–ª—å:** –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É Metric ID (1099-1138) –∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ NFSv3 –ø—Ä–æ—Ü–µ–¥—É—Ä.

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ—Ç—Ä–∏–∫ NFSv3

### Resource ID: 1000 (Controller NFSV3)

**–í—Å–µ–≥–æ –º–µ—Ç—Ä–∏–∫:** 40 (Metric IDs: 1099-1138)

**–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ:**
- **1099-1120** (22 –º–µ—Ç—Ä–∏–∫–∏) = OPS counts –¥–ª—è 22 NFSv3 procedures
- **1121-1138** (18 –º–µ—Ç—Ä–∏–∫) = Response Times –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö procedures

### NFSv3 Procedures (RFC 1813)

NFSv3 –∏–º–µ–µ—Ç **22 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã**:

```
0  = NULL
1  = GETATTR
2  = SETATTR
3  = LOOKUP
4  = ACCESS
5  = READLINK
6  = READ
7  = WRITE
8  = CREATE
9  = MKDIR
10 = SYMLINK
11 = MKNOD
12 = REMOVE
13 = RMDIR
14 = RENAME
15 = LINK
16 = READDIR
17 = READDIRPLUS
18 = FSSTAT
19 = FSINFO
20 = PATHCONF
21 = COMMIT
```

---

## üîç –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫

### –®–∞–≥ 1: –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä—Ö–∏–≤–∞ –≤ CSV

```bash
cd /data/projects/monitoring_VM_Grafana

# –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä—Ö–∏–≤–∞ NFSv3 —Å —Ç–µ–∫—É—â–∏–º METRIC_DICT.py
python3 Data2csv/Huawei_perf_parser_v0.2_parallel.py \
    -i Data2csv/logs/Perf_3000v6_NFSv3.zip \
    -o ./temp \
    --all-metrics

# –†–µ–∑—É–ª—å—Ç–∞—Ç: temp/[SN].csv
```

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏–∑ —É—Ç–∏–ª–∏—Ç—ã

**–¢—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- –°–∫—Ä–∏–Ω—à–æ—Ç—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Å **—Ç–æ—á–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏** –∏ **–≤—Ä–µ–º–µ–Ω–µ–º**
- –§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å —É–∫–∞–∑–∞–Ω–∏–µ–º timezone (–Ω–∞–ø—Ä–∏–º–µ—Ä, UTC+03:00)

**–ö–ª—é—á–µ–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏:**
- Total NFS remove OPS
- Total NFS getattr OPS
- Total NFS create OPS
- Total NFS lookup OPS
- Total NFS access OPS
- Total NFS mkdir OPS
- Total NFS readdir OPS
- –ò —Ç.–¥.

### –®–∞–≥ 3: –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º

#### 3.1 –ù–∞–π—Ç–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–∏–∫–∏ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∞—Ö

**–ü—Ä–∏–º–µ—Ä:** –ì—Ä–∞—Ñ–∏–∫ "Total NFS remove OPS" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–∏–∫ **10,552** –≤ **07:35:00 UTC+03:00**.

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º—è –≤ UTC (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
```
07:35 UTC+03 = 04:35 UTC
```

#### 3.2 –ü–æ–∏—Å–∫ –≤ CSV

**–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é –∏ –≤—Ä–µ–º–µ–Ω–∏:**

```bash
# –ü–æ–∏—Å–∫ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º 10,552 –≤ 07:35 UTC
grep "^Controller NFSV3;.*OPS(Number/s);0A" temp/[SN].csv | \
    grep "2025-10-11T07:35:00Z" | \
    awk -F';' '$4 == "10552.0" {print $2}'

# –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∫–∞–∂–µ—Ç, –∫–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –∏–º–µ—é—Ç —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ
```

#### 3.3 –ü—Ä–æ–±–ª–µ–º–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –º–æ–≥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è** –≤ –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏!

**–ü—Ä–∏–º–µ—Ä:**
```
NFS V3 NULL OPS(Number/s):   10552.0
NFS V3 REMOVE OPS(Number/s): 10552.0
```

–û–±–µ –º–µ—Ç—Ä–∏–∫–∏ = 10,552! –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∞—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è?

---

## üéØ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è: –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å Response Times

### –ú–µ—Ç–æ–¥: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ OPS ‚Üî Response Time

**–õ–æ–≥–∏–∫–∞:**
- –ö–æ–≥–¥–∞ OPS –≤—ã—Å–æ–∫–∏–π ‚Üí Response Time –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–Ω–∞—á–∏–º—ã–º (–Ω–µ 0)
- –ù–∞–π—Ç–∏ –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å –≤—ã—Å–æ–∫–∏–º Response Time –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∞—è OPS –º–µ—Ç—Ä–∏–∫–∞ –≤—ã—Å–æ–∫–∞—è –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç

**–ü—Ä–∏–º–µ—Ä:**

#### –®–∞–≥ 1: –ù–∞–π—Ç–∏ –≤—ã—Å–æ–∫–∏–π CREATE Response Time

```bash
grep "^Controller NFSV3;NFS V3 CREATE Response Time(us);0A" temp/[SN].csv | \
    awk -F';' '$4 > 3000 {print $5, $4}' | \
    sort -t' ' -k2 -rn | head -5

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# 2025-10-11T02:01:00Z 3111.0
```

#### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å OPS –º–µ—Ç—Ä–∏–∫–∏ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç

```bash
grep "^Controller NFSV3;.*OPS(Number/s);0A" temp/[SN].csv | \
    grep "2025-10-11T02:01:00Z" | \
    awk -F';' '{print $2, $4}' | \
    sort -t' ' -k2 -rn | head -10

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# NFS V3 NULL OPS(Number/s):    275.0
# NFS V3 SETATTR OPS(Number/s): 275.0  ‚Üê –≠—Ç–æ CREATE!
```

#### –®–∞–≥ 3: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

‚úÖ **–í—ã–≤–æ–¥:** Metric ID –¥–ª—è "SETATTR OPS" –≤ —Ç–µ–∫—É—â–µ–º mapping –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ **CREATE OPS**, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- CREATE Response Time = 3,111 (–≤—ã—Å–æ–∫–∏–π)
- SETATTR OPS = 275 (–≤ —ç—Ç–æ—Ç –∂–µ –º–æ–º–µ–Ω—Ç)
- –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!

---

## üìä –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `analyze_nfsv3_correlation.py`:

```python
#!/usr/bin/env python3
"""
–ê–Ω–∞–ª–∏–∑ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ OPS ‚Üî Response Times –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ NFSv3
"""

import csv
from collections import defaultdict
import sys

if len(sys.argv) < 2:
    print("Usage: python3 analyze_nfsv3_correlation.py <csv_file>")
    sys.exit(1)

csv_file = sys.argv[1]

# –°–ª–æ–≤–∞—Ä—å: timestamp ‚Üí {metric: value}
ops_data = defaultdict(lambda: defaultdict(float))
rt_data = defaultdict(lambda: defaultdict(float))

# –ß–∏—Ç–∞–µ–º CSV
with open(csv_file, 'r') as f:
    reader = csv.reader(f, delimiter=';')
    for row in reader:
        if len(row) >= 6:
            resource = row[0]
            metric = row[1]
            element = row[2]
            value = float(row[3])
            timestamp = row[4]
            
            if resource == "Controller NFSV3" and element == "0A":
                if "OPS(Number/s)" in metric:
                    ops_data[timestamp][metric] += value
                elif "Response Time(us)" in metric:
                    rt_data[timestamp][metric] = max(rt_data[timestamp][metric], value)

# –ê–Ω–∞–ª–∏–∑: –Ω–∞–π—Ç–∏ –º–æ–º–µ–Ω—Ç—ã —Å –≤—ã—Å–æ–∫–∏–º Response Time
print("=" * 100)
print("–ê–ù–ê–õ–ò–ó –ö–û–†–†–ï–õ–Ø–¶–ò–ò OPS ‚Üî RESPONSE TIMES")
print("=" * 100)

# –î–ª—è –∫–∞–∂–¥–æ–π Response Time –º–µ—Ç—Ä–∏–∫–∏
rt_metrics = ["CREATE", "REMOVE", "LOOKUP", "GETATTR", "ACCESS", "MKDIR"]

for proc in rt_metrics:
    rt_metric = f"NFS V3 {proc} Response Time(us)"
    
    # –ù–∞–π—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π Response Time
    max_rt = 0
    max_ts = None
    
    for ts, metrics in rt_data.items():
        if rt_metric in metrics and metrics[rt_metric] > max_rt:
            max_rt = metrics[rt_metric]
            max_ts = ts
    
    if max_rt > 0 and max_ts:
        print(f"\n{'=' * 100}")
        print(f"üìä –ü—Ä–æ—Ü–µ–¥—É—Ä–∞: {proc}")
        print(f"{'=' * 100}")
        print(f"‚è∞ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π Response Time: {max_rt:.1f} us –≤ {max_ts}")
        print(f"\nüìà OPS –º–µ—Ç—Ä–∏–∫–∏ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç:")
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º OPS –º–µ—Ç—Ä–∏–∫–∏ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç
        ops_at_time = sorted(ops_data[max_ts].items(), key=lambda x: x[1], reverse=True)
        
        for metric, value in ops_at_time[:10]:
            if value > 0:
                m = metric.replace("NFS V3 ", "").replace(" OPS(Number/s)", "")
                marker = " ‚≠ê" if value > 100 else ""
                print(f"  {m:20s}: {value:10.1f}{marker}")
        
        print(f"\nüí° –ú–µ—Ç—Ä–∏–∫–∞ —Å –≤—ã—Å–æ–∫–∏–º OPS ({'>100'}) –≤–µ—Ä–æ—è—Ç–Ω–æ = {proc} OPS")

print("\n" + "=" * 100)
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```bash
python3 analyze_nfsv3_correlation.py temp/2102355TLFFSQ4100003.csv
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫–∏

–ú–µ—Ç—Ä–∏–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è **–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–π**, –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã **–í–°–ï** —É—Å–ª–æ–≤–∏—è:

1. ‚úÖ **–ó–Ω–∞—á–µ–Ω–∏–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç** —Å –≥—Ä–∞—Ñ–∏–∫–æ–º —É—Ç–∏–ª–∏—Ç—ã (¬±5%)
2. ‚úÖ **–í—Ä–µ–º—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç** (—Å —É—á—ë—Ç–æ–º timezone)
3. ‚úÖ **–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å Response Time** –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ (–≤—ã—Å–æ–∫–∏–π OPS ‚Üí –≤—ã—Å–æ–∫–∏–π RT)
4. ‚úÖ **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å** –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç)

**–ü—Ä–∏–º–µ—Ä –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–π –º–µ—Ç—Ä–∏–∫–∏:**

```python
"1101": "NFS V3 REMOVE OPS(Number/s)",  # ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:
                                         # - –ó–Ω–∞—á–µ–Ω–∏–µ: 10,552 –≤ 07:35 UTC
                                         # - REMOVE RT: 815 us (–≤—ã—Å–æ–∫–∏–π)
                                         # - –ì—Ä–∞—Ñ–∏–∫ —É—Ç–∏–ª–∏—Ç—ã —Å–æ–≤–ø–∞–¥–∞–µ—Ç
```

---

## üö® –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: NULL OPS –¥—É–±–ª–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ –º–µ—Ç—Ä–∏–∫–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:** Metric ID `1099` ("NULL OPS") –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ –∂–µ –∑–Ω–∞—á–µ–Ω–∏—è, —á—Ç–æ –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã.

**–ü—Ä–∏–º–µ—Ä—ã:**
- –í 07:35: NULL = REMOVE = 10,552
- –í 02:18: NULL = SETATTR = 8,488
- –í 04:50: NULL = WRITE = 17,885

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ. –í–æ–∑–º–æ–∂–Ω–æ:
1. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞
2. NULL –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ä—Ä–µ–ª–∏—Ä—É–µ—Ç —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏
3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Metric ID –≤ –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:** –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å NULL OPS –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∏—Ö –º–µ—Ç—Ä–∏–∫.

### –ü—Ä–æ–±–ª–µ–º–∞ 2: ACCESS Response Time –≤—Å–µ–≥–¥–∞ = 0

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–µ—Ç—Ä–∏–∫–∞ "NFS V3 ACCESS Response Time(us)" –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 0.

**–°–ª–µ–¥—Å—Ç–≤–∏–µ:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è ACCESS OPS.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã:
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∞—Ö

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í—Ä–µ–º—è –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∞—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å:
- –í UTC (—Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º Z)
- –í –ª–æ–∫–∞–ª—å–Ω–æ–π timezone (UTC+03:00)
- –ë–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è timezone

**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ–≥–¥–∞ —É—Ç–æ—á–Ω—è—Ç—å timezone —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ UTC –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ CSV.

---

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ METRIC_DICT.py

### –§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–∏

```python
"METRIC_ID": "NFS V3 PROCEDURE OPS(Number/s)",  # –°—Ç–∞—Ç—É—Å: –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
```

**–°—Ç–∞—Ç—É—Å—ã:**
- `‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:` - –º–µ—Ç—Ä–∏–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ + –¥–µ—Ç–∞–ª–∏
- `–Ω–µ —É–≤–µ—Ä–µ–Ω` - —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- `–Ω–µ —É–≤–µ—Ä–µ–Ω - –¥—É–±–ª–∏—Ä—É–µ—Ç` - –¥—É–±–ª–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ –º–µ—Ç—Ä–∏–∫–∏

**–ü—Ä–∏–º–µ—Ä:**

```python
# NFSv3 Procedure Counts (OPS) - Resource ID 1000 (Controller NFSV3)
"1099": "NFS V3 NULL OPS(Number/s)",           # –Ω–µ —É–≤–µ—Ä–µ–Ω - –¥—É–±–ª–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ
"1100": "NFS V3 CREATE OPS(Number/s)",         # ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ: 275 –≤ 02:01, RT=3,111
"1101": "NFS V3 REMOVE OPS(Number/s)",         # ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ: 10,552 –≤ 07:35, RT=815
"1102": "NFS V3 LOOKUP OPS(Number/s)",         # –Ω–µ —É–≤–µ—Ä–µ–Ω
"1103": "NFS V3 ACCESS OPS(Number/s)",         # –Ω–µ —É–≤–µ—Ä–µ–Ω
...
"1114": "NFS V3 GETATTR OPS(Number/s)",        # ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ: 618 –≤ 00:05
```

---

## üîÑ Workflow –¥–ª—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞

### –®–∞–≥ 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```bash
# 1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å —ç—Ç—É –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
cat NFSV3_METRICS_TROUBLESHOOTING.md

# 2. –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ç–µ–∫—É—â–∏–π METRIC_DICT.py
cat Data2csv/METRIC_DICT.py | grep -A 50 "1099"

# 3. –†–∞—Å–ø–∞—Ä—Å–∏—Ç—å –∞—Ä—Ö–∏–≤ NFSv3
python3 Data2csv/Huawei_perf_parser_v0.2_parallel.py \
    -i Data2csv/logs/Perf_3000v6_NFSv3.zip \
    -o ./temp \
    --all-metrics
```

### –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ó–∞–ø—Ä–æ—Å–∏—Ç—å:**
- –°–∫—Ä–∏–Ω—à–æ—Ç—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- –£–∫–∞–∑–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∏ timezone
- –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ–¥—É—Ä, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å

### –®–∞–≥ 3: –ê–Ω–∞–ª–∏–∑

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏
python3 analyze_nfsv3_correlation.py temp/[SN].csv

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞:
# 1. –ù–∞–π—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
# 2. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è –≤ UTC
# 3. –ù–∞–π—Ç–∏ –º–µ—Ç—Ä–∏–∫—É –≤ CSV
# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Response Time –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é
```

### –®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä—è

```python
# –û–±–Ω–æ–≤–∏—Ç—å METRIC_DICT.py —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
# –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏
```

### –®–∞–≥ 5: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

```bash
# –ü–µ—Ä–µ–ø–∞—Ä—Å–∏—Ç—å —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º —Å–ª–æ–≤–∞—Ä—ë–º
rm -f temp/*.csv
python3 Data2csv/Huawei_perf_parser_v0.2_parallel.py \
    -i Data2csv/logs/Perf_3000v6_NFSv3.zip \
    -o ./temp \
    --all-metrics

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ—è–≤–∏–ª–∏—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ
grep "NFS V3 REMOVE OPS" temp/[SN].csv | head -5
grep "NFS V3 CREATE OPS" temp/[SN].csv | head -5
```

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–æ–∏—Å–∫ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é –∏ –≤—Ä–µ–º–µ–Ω–∏

```bash
# –ù–∞–π—Ç–∏ –º–µ—Ç—Ä–∏–∫—É —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º X –≤ –º–æ–º–µ–Ω—Ç Y
grep "^Controller NFSV3;.*OPS(Number/s);0A" temp/[SN].csv | \
    grep "YYYY-MM-DDTHH:MM:SSZ" | \
    awk -F';' '$4 == "VALUE" {print $2}'
```

### –¢–æ–ø-N –º–µ—Ç—Ä–∏–∫ –≤ –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ø-10 OPS –º–µ—Ç—Ä–∏–∫ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –º–æ–º–µ–Ω—Ç
grep "^Controller NFSV3;.*OPS(Number/s);0A" temp/[SN].csv | \
    grep "YYYY-MM-DDTHH:MM:SSZ" | \
    awk -F';' '{print $2, $4}' | \
    sort -t' ' -k2 -rn | \
    head -10
```

### –ü–æ–∏—Å–∫ –≤—ã—Å–æ–∫–∏—Ö Response Times

```bash
# –ù–∞–π—Ç–∏ –º–æ–º–µ–Ω—Ç—ã —Å –≤—ã—Å–æ–∫–∏–º Response Time –¥–ª—è –ø—Ä–æ—Ü–µ–¥—É—Ä—ã X
grep "^Controller NFSV3;NFS V3 X Response Time(us);0A" temp/[SN].csv | \
    awk -F';' '$4 > 1000 {print $5, $4}' | \
    sort -t' ' -k2 -rn | \
    head -10
```

### –°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º (0A + 0B)

```bash
# Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å—É–º–º—ã
python3 << 'EOF'
import csv
from collections import defaultdict

sums = defaultdict(float)

with open("temp/[SN].csv", 'r') as f:
    reader = csv.reader(f, delimiter=';')
    for row in reader:
        if len(row) >= 6:
            if row[0] == "Controller NFSV3" and "OPS(Number/s)" in row[1]:
                if row[4] == "YYYY-MM-DDTHH:MM:SSZ":
                    sums[row[1]] += float(row[3])

for metric, total in sorted(sums.items(), key=lambda x: x[1], reverse=True)[:10]:
    if total > 0:
        print(f"{metric}: {total:.1f}")
EOF
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫–∏

–ü–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –º–µ—Ç—Ä–∏–∫–∏ –≤ —Å–ª–æ–≤–∞—Ä—å, —É–±–µ–¥–∏—Ç–µ—Å—å:

- [ ] –ó–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å CSV (¬±5%)
- [ ] –í—Ä–µ–º—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç (–ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ timezone)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å Response Time
- [ ] –ú–µ—Ç—Ä–∏–∫–∞ –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ (–∏–ª–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–æ)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ø–µ—Ä–µ–ø–∞—Ä—Å–∏–Ω–≥ —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º —Å–ª–æ–≤–∞—Ä—ë–º

---

## üìå –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (–Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)

### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (3):

```python
"1100": "NFS V3 CREATE OPS(Number/s)",   # ‚úÖ 275 –≤ 02:01, CREATE RT=3,111
"1101": "NFS V3 REMOVE OPS(Number/s)",   # ‚úÖ 10,552 –≤ 07:35, REMOVE RT=815
"1114": "NFS V3 GETATTR OPS(Number/s)",  # ‚úÖ 618 –≤ 00:05
```

### –¢—Ä–µ–±—É—é—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (37):

- OPS: 1099, 1102-1113, 1115-1120 (19 –º–µ—Ç—Ä–∏–∫)
- Response Times: 1121-1138 (18 –º–µ—Ç—Ä–∏–∫)

---

## üÜò Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: CSV –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω—É–∂–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

**–ü—Ä–∏—á–∏–Ω–∞:** Metric IDs –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ METRIC_DICT.py

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≤ —Å–ª–æ–≤–∞—Ä—å
2. –ü–µ—Ä–µ–ø–∞—Ä—Å–∏—Ç—å —Å `--all-metrics`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: –ó–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è timezone
2. –ì—Ä–∞—Ñ–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å—É–º–º—É —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (0A + 0B)
3. –ì—Ä–∞—Ñ–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ –¥—Ä—É–≥–æ–π –ø–µ—Ä–∏–æ–¥
4. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Metric ID

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∂–¥—É—é –ø—Ä–∏—á–∏–Ω—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ —É–¥–∞—ë—Ç—Å—è –Ω–∞–π—Ç–∏ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é —Å Response Time

**–ü—Ä–∏—á–∏–Ω–∞:** Response Time = 0 –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤–æ –≤—Ä–µ–º–µ–Ω–∏
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
- –ê–Ω–∞–ª–∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** –û–∫—Ç—è–±—Ä—å 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ü—Ä–æ–µ–∫—Ç:** Huawei Storage Performance Monitoring


